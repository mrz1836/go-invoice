<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice {{.Number}}</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 2rem;
            background: #fff;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #000;
            padding-bottom: 1rem;
            margin-bottom: 2rem;
        }

        .company-name {
            font-size: 2rem;
            font-weight: 300;
            margin: 0;
        }

        .invoice-info {
            text-align: right;
        }

        .invoice-number {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
        }

        .invoice-date {
            color: #666;
            margin: 0.5rem 0 0 0;
        }

        .billing-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .section {
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .work-items {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2rem;
        }

        .work-items th {
            text-align: left;
            border-bottom: 1px solid #000;
            padding: 0.75rem 0;
            font-weight: 600;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .work-items td {
            padding: 1rem 0;
            border-bottom: 1px solid #eee;
        }

        .work-items tbody tr:last-child td {
            border-bottom: none;
        }

        .text-right {
            text-align: right;
        }

        .text-center {
            text-align: center;
        }

        .totals {
            margin-left: auto;
            width: 300px;
        }

        .totals table {
            width: 100%;
            border-collapse: collapse;
        }

        .totals td {
            padding: 0.5rem 0;
            border-bottom: 1px solid #eee;
        }

        .totals .total-row {
            font-weight: 600;
            font-size: 1.1rem;
            border-top: 2px solid #000;
            border-bottom: none;
        }

        .totals .total-row td {
            padding-top: 1rem;
        }

        .payment-terms {
            margin-top: 3rem;
            padding-top: 1rem;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 0.9rem;
        }

        .status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 3px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            margin-left: 1rem;
        }

        .status.draft { background: #fef5e7; color: #d69e2e; }
        .status.sent { background: #ebf8ff; color: #3182ce; }
        .status.paid { background: #f0fff4; color: #38a169; }
        .status.overdue { background: #fed7d7; color: #e53e3e; }

        @media print {
            body { padding: 0; }
            .status { display: none; }
        }

        @media (max-width: 600px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .invoice-info {
                text-align: left;
            }
            
            .billing-info {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .work-items {
                font-size: 0.875rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <h1 class="company-name">{{.Business.Name | default "Your Company"}}</h1>
        <div class="invoice-info">
            <h2 class="invoice-number">
                Invoice {{.Number}}
                <span class="status {{.Status | lower}}">{{.Status | title}}</span>
            </h2>
            <p class="invoice-date">{{formatDate .Date "January 2, 2006"}}</p>
        </div>
    </header>

    <section class="billing-info">
        <div class="from">
            <div class="section-title">From</div>
            <div>
                <strong>{{.Business.Name | default "Your Company"}}</strong><br>
                {{if .Business.Address}}{{.Business.Address}}<br>{{end}}
                {{if .Business.Email}}{{.Business.Email}}<br>{{end}}
                {{if .Business.Phone}}{{.Business.Phone}}{{end}}
            </div>
        </div>
        
        <div class="to">
            <div class="section-title">To</div>
            <div>
                <strong>{{.Client.Name}}</strong><br>
                {{if .Client.Email}}{{.Client.Email}}<br>{{end}}
                {{if .Client.Phone}}{{.Client.Phone}}<br>{{end}}
                {{if .Client.Address}}{{.Client.Address}}{{end}}
            </div>
        </div>
    </section>

    {{if .Description}}
    <section class="section">
        <div class="section-title">Description</div>
        <p>{{.Description}}</p>
    </section>
    {{end}}

    {{if gt (len .WorkItems) 0}}
    <table class="work-items">
        <thead>
            <tr>
                <th>Date</th>
                <th>Description</th>
                <th class="text-center">Hours</th>
                <th class="text-right">Rate</th>
                <th class="text-right">Amount</th>
            </tr>
        </thead>
        <tbody>
            {{range .WorkItems}}
            <tr>
                <td>{{formatDate .Date "Jan 2"}}</td>
                <td>{{.Description}}</td>
                <td class="text-center">{{.Hours | formatFloat 1}}</td>
                <td class="text-right">${{.Rate | formatFloat 2}}</td>
                <td class="text-right">${{.Total | formatFloat 2}}</td>
            </tr>
            {{end}}
        </tbody>
    </table>

    <div class="totals">
        <table>
            <tr>
                <td>Subtotal</td>
                <td class="text-right">${{.Subtotal | formatFloat 2}}</td>
            </tr>
            {{if gt .TaxRate 0}}
            <tr>
                <td>Tax ({{multiply .TaxRate 100 | formatFloat 1}}%)</td>
                <td class="text-right">${{.TaxAmount | formatFloat 2}}</td>
            </tr>
            {{end}}
            <tr class="total-row">
                <td>Total</td>
                <td class="text-right">${{.Total | formatFloat 2}}</td>
            </tr>
        </table>
    </div>
    {{end}}

    {{if .Business.PaymentTerms}}
    <section class="payment-terms">
        <div class="section-title">Payment Terms</div>
        <p>{{.Business.PaymentTerms}}</p>
        {{if .Business.BankDetails}}
        <p>{{.Business.BankDetails}}</p>
        {{end}}
    </section>
    {{end}}

    <section class="payment-terms">
        <p><strong>Due Date:</strong> {{formatDate .DueDate "January 2, 2006"}}</p>
        <p>Thank you for your business.</p>
    </section>
</body>
</html>